<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<canvas id="hud-bg"></canvas>

<div class="panel">
  <h2>Главная</h2>
  <div id="myInfo" class="row">
    <div>#</div>
    <div id="nick"></div>
    <div id="points"></div>
  </div>
  <button onclick="location.href='leaderboard.html'">Лидерборд</button>
</div>

<script type="module">
import { auth, db } from "./firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, async user=>{
  if(!user) location.href="index.html";
  const me = await getDoc(doc(db,"users",user.uid));
  if(me.data().situation!=="verified") location.href="nick.html";
  document.getElementById("nick").innerText = me.data().nick;
  document.getElementById("points").innerText = me.data().points + " баллов";
});
</script>
<script src="hudBackground.js"></script>
</body>
</html>
